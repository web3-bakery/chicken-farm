(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[466],{35494:function(e,t,n){Promise.resolve().then(n.bind(n,20410))},20410:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ea}});var a,i,s=n(57437),r=n(2265),p=n(63984),u=n(43226),l=n(28874),o=JSON.parse('{"M":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"farms","outputs":[{"internalType":"uint256","name":"size","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"farmId","type":"uint256"}],"name":"getFarmDetails","outputs":[{"components":[{"internalType":"uint256","name":"size","type":"uint256"},{"internalType":"uint256[][]","name":"matrix","type":"uint256[][]"}],"internalType":"struct FarmNFT.Farm","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"initializeFarm","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"farmId","type":"uint256"},{"internalType":"uint256","name":"x","type":"uint256"},{"internalType":"uint256","name":"y","type":"uint256"},{"internalType":"uint256","name":"itemId","type":"uint256"}],"name":"placeItem","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenOfOwnerByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_owner","type":"address"}],"name":"walletOfOwner","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"}],"L":"0x7a2088a1bFc9d81c55368AE168C2C02570cB814F"}'),y=n(9951);let d={0:"⬜",1:"\uD83C\uDFE0",2:"\uD83C\uDF33",3:"\uD83C\uDF3E"};var m=e=>{let{farm:t,onPlaceItem:n}=e,a=(()=>{let e=t.size||5,n=[];for(let a=0;a<e;a++){n[a]=[];for(let i=0;i<e;i++)n[a][i]=t.matrix&&t.matrix[a]&&t.matrix[a][i]?t.matrix[a][i]:0}return n})();return(0,s.jsx)(p.Z,{children:a.map((e,t)=>(0,s.jsx)(p.Z,{display:"flex",children:e.map((e,a)=>(0,s.jsx)(p.Z,{onClick:()=>n(t,a,1),sx:{m:1,p:2,border:"1px solid #ddd",cursor:"pointer",width:"40px",height:"40px",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,s.jsx)(u.Z,{variant:"h6",children:d[Number(e.toString())]||"⬜"})},a))},t))})},c=n(80234);let{useChainId:f,useAccounts:T,useIsActivating:b,useIsActive:x,useProvider:v,useENSNames:g}=c.hooks;var h=e=>{let{farmId:t,selectedItem:n}=e,[a,i]=(0,r.useState)(null),[l,d]=(0,r.useState)(""),c=v(),f=T(),b=x();(0,r.useEffect)(()=>{b&&f&&f.length>0&&d(f[0])},[b,f]);let g=async(e,a,i)=>{if(!c)return;let s=new y.CH(o.L,o.M,c.getSigner());if(l){console.log("account",l),console.log("x",e),console.log("y",a),console.log("itemId",i),console.log("selectedItem",n);try{let i=await s.placeItem(t,e,a,n.itemId),r=await i.wait();console.log(r)}catch(e){console.log("error",e)}}};return(0,r.useEffect)(()=>{let e=async()=>{if(c)try{let e=new y.CH(o.L,o.M,c),n=await e.getFarmDetails(t);i(n),console.log("farmData",n)}catch(e){console.log("error",e)}};e()},[t]),(0,s.jsxs)(p.Z,{boxShadow:3,padding:3,children:[(0,s.jsx)(u.Z,{variant:"h6",children:"Farm Details"}),a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(u.Z,{variant:"body1",children:["Size: ",a.size.toString()]}),(0,s.jsx)(m,{farm:a,onPlaceItem:g})]}):(0,s.jsx)(u.Z,{children:"Loading..."})]})},I=n(74203),w=n(49050);let{useChainId:F,useAccounts:M,useIsActivating:j,useIsActive:S,useProvider:A,useENSNames:Z}=c.hooks;var k=()=>{let e=M(),[t,n]=(0,r.useState)(""),a=A(),i=S();console.log("isActive",i);let p=async()=>{if(!a)return;let e=new y.CH(o.L,o.M,a.getSigner());if(t){let t=await e.initializeFarm({gasLimit:1e6}),n=await t.wait();console.log(n)}};return(0,r.useEffect)(()=>{i&&e&&e.length>0&&n(e[0])},[i,e]),(0,s.jsx)(w.Z,{variant:"contained",color:"primary",onClick:p,children:"Create New Farm"})},C=n(35266),D=n(80356),E=JSON.parse('{"M":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256[]","name":"ids","type":"uint256[]"},{"indexed":false,"internalType":"uint256[]","name":"values","type":"uint256[]"}],"name":"TransferBatch","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"id","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"TransferSingle","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"string","name":"value","type":"string"},{"indexed":true,"internalType":"uint256","name":"id","type":"uint256"}],"name":"URI","type":"event"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"id","type":"uint256"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address[]","name":"accounts","type":"address[]"},{"internalType":"uint256[]","name":"ids","type":"uint256[]"}],"name":"balanceOfBatch","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"enum ItemsNFT.ItemType","name":"itemType","type":"uint8"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"createItem","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"items","outputs":[{"internalType":"enum ItemsNFT.ItemType","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256[]","name":"ids","type":"uint256[]"},{"internalType":"uint256[]","name":"amounts","type":"uint256[]"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeBatchTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"uri","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"}],"L":"0x09635F643e140090A9A8Dcd712eD6285858ceBef"}');(a=i||(i={}))[a.BUILDING=0]="BUILDING",a[a.TREE=1]="TREE",a[a.FIELD=2]="FIELD";let N={1:"\uD83C\uDFE0",2:"\uD83C\uDF33",3:"\uD83C\uDF3E"},{useChainId:O,useAccounts:L,useIsActivating:P,useIsActive:B,useProvider:z,useENSNames:_}=c.hooks;var H=e=>{let{onItemSelectedCallback:t}=e,[n,a]=(0,r.useState)([]),[l,o]=(0,r.useState)(null),d=L(),[m,c]=(0,r.useState)(""),f=z(),T=B();console.log("isActive",T),(0,r.useEffect)(()=>{T&&d&&d.length>0&&c(d[0])},[T,d]),(0,r.useEffect)(()=>{x()},[m]);let b=async e=>{console.log("handleSelectItem",e),o(e),t(e)},x=async()=>{if(!f)return;let e=new y.CH(E.L,E.M,f.getSigner());if(m){let t=[];for(let n=1;n<=3;n++){let a=await e.balanceOf(m,n);console.log("balance",a);let s=await e.items(n);console.log("itemType",s),t.push({itemId:n,itemType:i[s],balance:a.toString()}),console.log("userItems",s)}console.log("userItems",t),a(t)}};return(0,s.jsxs)(p.Z,{boxShadow:3,padding:3,children:[(0,s.jsx)(u.Z,{variant:"h6",children:"Available Items"}),(0,s.jsx)(C.Z,{children:n.map(e=>(0,s.jsxs)(D.ZP,{children:[(0,s.jsx)(u.Z,{variant:"body1",children:e.name}),(0,s.jsxs)(w.Z,{variant:"contained",color:e.itemId==(null==l?void 0:l.itemId)?"primary":"secondary",onClick:()=>b(e),children:["Place on Farm",N[e.itemId]||"\uD83C\uDF31","(",e.balance,")"]})]},e.itemId))})]})},R=n(73701),U=n(66988),G=n(98489),J=n(30666),V=n(39279);let{useChainId:Y,useAccounts:q,useIsActivating:K,useIsActive:Q,useProvider:W,useENSNames:X}=c.hooks;var $=e=>{let{onFarmClickedCallback:t}=e,[n,a]=(0,r.useState)([]),i=q(),[p,u]=(0,r.useState)(""),l=W(),d=Q();return console.log("isActive",d),(0,r.useEffect)(()=>{d&&i&&i.length>0&&u(i[0])},[d,i]),(0,r.useEffect)(()=>{let e=async()=>{if(l)try{let e=new y.CH(o.L,o.M,l.getSigner()),t=await e.walletOfOwner(p);console.log("userFarms",t),a(t)}catch(e){console.error("Failed to fetch farms:",e)}};e()},[l,p]),(0,s.jsxs)(R.Z,{children:[(0,s.jsx)(U.Z,{children:(0,s.jsxs)(G.Z,{children:[(0,s.jsx)(J.Z,{children:"Farm ID"}),(0,s.jsx)(J.Z,{children:"Actions"})]})}),(0,s.jsx)(V.Z,{children:n.map(e=>(0,s.jsxs)(G.Z,{children:[(0,s.jsx)(J.Z,{children:e.toString()}),(0,s.jsx)(J.Z,{children:(0,s.jsx)(w.Z,{onClick:()=>t(e.toString()),variant:"contained",color:"primary",children:"View Details"})})]},e.toString()))})]})};let{useAccounts:ee,useIsActive:et,useProvider:en}=c.hooks;var ea=()=>{let e=ee(),[t,n]=(0,r.useState)(""),a=en(),[i,o]=(0,r.useState)(null),[y,d]=(0,r.useState)(null),m=et();return(0,r.useEffect)(()=>{m&&e&&e.length>0&&n(e[0])},[m,e]),(0,s.jsx)(I.Z,{children:(0,s.jsxs)(p.Z,{padding:3,children:[(0,s.jsx)(k,{}),(0,s.jsx)(u.Z,{variant:"h4",gutterBottom:!0,children:"Your Fields"}),(0,s.jsx)($,{onFarmClickedCallback:e=>{console.log("onFarmClicked",e),o(e.toString())}}),t&&a?(0,s.jsxs)(l.ZP,{container:!0,spacing:4,children:[(0,s.jsx)(l.ZP,{item:!0,xs:12,md:8,children:(0,s.jsx)(h,{farmId:i,selectedItem:y})}),(0,s.jsx)(l.ZP,{item:!0,xs:12,md:4,children:(0,s.jsx)(H,{onItemSelectedCallback:e=>{console.log("onItemSelected",e),d(e)}})})]}):(0,s.jsx)(u.Z,{children:"Please connect your wallet to view your farm."})]})})}}},function(e){e.O(0,[612,689,371,574,971,472,744],function(){return e(e.s=35494)}),_N_E=e.O()}]);