(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[761],{3670:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/treasury",function(){return n(2178)}])},8226:function(e,t,n){"use strict";var a=n(5893);n(7294);var r=n(6822),s=n(5861),i=n(8078);let u=e=>{let{label:t,value:n,symbol:u}=e;return(0,a.jsxs)(r.Z,{sx:l.card,children:[(0,a.jsx)(s.Z,{color:"text.secondary",fontSize:14,mt:0,children:t}),(0,a.jsxs)(r.Z,{sx:l.wrapper,children:[(0,a.jsx)(s.Z,{variant:"h6",my:0,mr:1,children:n?n.split(".")[0]:(0,a.jsx)(i.Z,{width:60})}),(0,a.jsx)(s.Z,{fontWeight:700,fontSize:12,color:"text.secondary",children:u})]})]})},l={container:{width:"100%",display:"flex",marginBottom:"30px",gap:2},card:{bgcolor:"background.paper",p:2,flex:1,borderRadius:2,boxShadow:1},wrapper:{display:"flex",alignItems:"flex-end"}};t.Z=u},2178:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return G}});var a=n(5893),r=n(7294),s=n(9008),i=n.n(s),u=n(7932),l=n(5861),o=n(6822),p=n(9417),d=n(4001),y=n(9285),c=n(6076),m=n(5553),f=n(1378),b=n(8240);let x=e=>{let{provider:t,account:n}=e,[s,i]=(0,r.useState)(""),u=async()=>{if(!n)return;let e=t.getSigner(),a=new c.CH(f.L,f.M,e),r=new c.CH(b.L,b.M,e),i=m.fi(s);console.log("amountToBurn test",i);try{let e=await r.approve(a.address,i);await e.wait();let t=await a.burnEggs(i);await t.wait(),console.log("Burned successfully!")}catch(e){console.error("Error burning EGGS:",e)}};return(0,a.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,a.jsx)(y.Z,{label:"Amount to Burn",value:s,onChange:e=>i(e.target.value),variant:"outlined"}),(0,a.jsx)(p.Z,{variant:"contained",color:"primary",onClick:u,children:"Burn EGGS"})]})};var h=n(381),w=n.n(h);n(3704);var g=n(7372),T=n(8226);let{useChainId:v,useAccounts:j,useIsActivating:S,useIsActive:Z,useProvider:E,useENSNames:M}=g.P;function G(){let e=j(),t=E(),n=Z(),[s,y]=(0,r.useState)(""),[h,g]=(0,r.useState)(null),[v,S]=(0,r.useState)(null),[M,G]=(0,r.useState)(null),[B,C]=(0,r.useState)([]),[D,F]=(0,r.useState)(""),[_,N]=(0,r.useState)([]);async function O(){if((t||s)&&t){let e=new c.CH(f.L,f.M,t.getSigner()),n=await e.startNewCycle();await n.wait()}}async function k(){if(!t&&!s)return;let e=new c.CH(b.L,b.M,t),n=new c.CH(f.L,f.M,t),a=await e.totalSupply();console.log("totalSupply test",a=m.dF(a)),g(a);let r=await e.balanceOf(s);S(r=m.dF(r));let i=await t.getBalance(f.L);G(m.dF(i)),console.log("burnerAddresses test");let u=[],l=0;for(;;)try{let e=await n.burners(l);u.push(e),l++}catch(e){break}let o=[];for(let e of u){let t=await n.burnedEggsByUser(e);o.push({address:String(e),burnedEggs:Number(m.dF(t))})}N(o);let p=await n.nextCycleTimestamp();w().duration(1e3*w()(Number(p)).diff(w()().unix())).format("h [hrs], m [min], s [secs]"),F(p)}return(0,r.useEffect)(()=>{t&&e&&(null==e?void 0:e.length)>0&&y(e[0])},[e,t]),(0,r.useEffect)(()=>{s&&k()},[s]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i(),{children:[(0,a.jsx)("title",{children:"Eggspedition: The Eggciting Journey!"}),(0,a.jsx)("meta",{name:"description",content:"Embark on the ultimate eggventure in the world of web3 games."}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsx)(d.Z,{children:(0,a.jsx)(u.Z,{maxWidth:"md",children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{variant:"h1",children:"EGGS Treasury! "}),(0,a.jsx)(l.Z,{gutterBottom:!0,mb:2,children:"The EGGS Treasury rewards active players every day."}),(0,a.jsxs)(o.Z,{sx:{display:"flex",gap:4,flexWrap:"wrap",mb:4},children:[(0,a.jsx)(o.Z,{sx:{flex:1},children:(0,a.jsx)(T.Z,{label:"\uD83E\uDD5A Total Eggs",value:h,symbol:"EGGS"})}),(0,a.jsx)(o.Z,{sx:{flex:1},children:(0,a.jsx)(T.Z,{label:"\uD83C\uDFE6 Treasury Balance",value:M,symbol:"SMR"})})]}),(0,a.jsx)(l.Z,{variant:"h4",gutterBottom:!0,children:"Burn EGGS"}),(0,a.jsx)(o.Z,{sx:{mt:2,mb:4},children:(0,a.jsxs)(o.Z,{sx:{display:"flex",gap:4,flexWrap:"wrap"},children:[(0,a.jsx)(T.Z,{label:"\uD83E\uDD5A Your Eggs",value:null==v?void 0:v.toString(),symbol:"EGGS"}),(0,a.jsx)(x,{provider:t,account:s})]})}),(0,a.jsx)(l.Z,{variant:"h6",gutterBottom:!0,children:"Burner Addresses and EGGS:"}),(0,a.jsx)(o.Z,{sx:{bgcolor:"primary",borderRadius:2,boxShadow:1,overflow:"hidden",my:4,position:"relative",p:2},children:_.map((e,t)=>(0,a.jsxs)(l.Z,{children:["Adresse: ",e.address," - burned EGGS: ",e.burnedEggs]},t))}),w()(Number(D)).diff(w()().unix())>0?(0,a.jsxs)(o.Z,{sx:{bgcolor:"primary",borderRadius:2,boxShadow:1,overflow:"hidden",my:4,position:"relative",p:2},children:["‚è≥ Time left for current cycle:"," ",(0,a.jsx)("strong",{children:w().duration(1e3*w()(Number(D)).diff(w()().unix())).format("h [hrs], m [min], s [secs]")})]}):(0,a.jsxs)(o.Z,{sx:{bgcolor:"primary",borderRadius:2,boxShadow:1,overflow:"hidden",my:4,position:"relative",p:2},children:[(0,a.jsx)(l.Z,{variant:"h6",children:"\uD83C\uDF89 Start the new cycle and become some shares of the treasury!"}),(0,a.jsx)(p.Z,{variant:"contained",color:"primary",onClick:O,children:"Start new cycle"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{variant:"h3",gutterBottom:!0,children:"Welcome new farmer!"}),(0,a.jsx)(l.Z,{variant:"body1",gutterBottom:!0,children:"Please connect your wallet to continue."})]})})})]})}},8240:function(e){"use strict";e.exports=JSON.parse('{"M":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"burn","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"burnFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"mint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"}],"L":"0x8cD395eF72C8F34D1c817D6418005A83F3b3e32a"}')}},function(e){e.O(0,[885,10,364,294,730,285,833,774,888,179],function(){return e(e.s=3670)}),_N_E=e.O()}]);