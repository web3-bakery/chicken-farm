(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4863:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auction/[nftAddress]/[tokenId]",function(){return n(2266)}])},2266:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var i=n(5893),a=n(4146),s=n(5553),r=n(7294),d=n(1163),l=n(3123),o=n(8617),u=n(7372),c=n(139),p=n(9008),y=n.n(p),m=n(7932),f=n(6822),g=n(5861),h=n(9285),T=n(9417);let{useChainId:w,useAccounts:v,useIsActivating:x,useIsActive:A,useProvider:_,useENSNames:b}=u.P;function N(){var e,t;let n=_(),u=v(),{showNotification:p}=(0,l.l)(),w=(0,d.useRouter)(),{nftAddress:x,tokenId:A}=w.query,[b,N]=(0,r.useState)(""),[j,S]=(0,r.useState)(""),[C,k]=(0,r.useState)(""),[M,I]=(0,r.useState)([]),[B,W]=(0,r.useState)(""),[O,E]=(0,r.useState)(0),[H,P]=(0,r.useState)(!0),[L,Z]=(0,r.useState)(!1),[Y,z]=(0,r.useState)(!1),[F,U]=(0,r.useState)(!0),[D,R]=(0,r.useState)(""),[V,X]=(0,r.useState)(""),[q,J]=(0,r.useState)(""),[G,K]=(0,r.useState)(""),[Q,$]=(0,r.useState)({auctions:[{currentPrice:"",nftSeller:""}]}),ee=async()=>{if(U(!0),!n)return;console.log("fetchAuctions"),console.log("nftAddress",x),console.log("tokenId",A);let e=new a.CH(o.L,o.M,n),t=await e.nftContractAuctions(x,A);console.log("auctionDetails",t),J(t.currentWinner);let i=new Set;try{let t=0;for(;;){let n=await e.getSpecificAddress(x,A,t);i.add(n),t++}}catch(e){}let r=Array.from(i),d=r.map(async t=>{let n=await e.getBidOfAnAddress(x,A,t);return{tokenId:A,bidder:t,bidAmount:s.formatEther(n)}}),l=await Promise.all(d);I(e=>[...l]),console.log("auctionOngoing",await e.getStateOfAuction(x,A));let u=await et();console.log("The TokenURI is ".concat(u));let c=await en();console.log("The starting time is ".concat(c));let p=await es();console.log("The duration of auction is ".concat(p));let y=Math.round(Date.now()/1e3);console.log("The current time is ".concat(y)),console.log("The auction will end at ".concat(c+p)),E(Number(c)+Number(p)),Number(c)+Number(p)<Number(y)?(P(!0),console.log("auctionEnded: TRUE")):(P(!1),console.log("auctionEnded: FALSE"));let m=await er();console.log("seller ".concat(m)),console.log("account",V),V==m?Z(!0):Z(!1);let f=await ei();console.log("winner ".concat(f)),console.log("account ".concat(V)),V==f?z(!0):z(!1);let g=await ea();$({auctions:[{currentPrice:g,nftSeller:m}]}),U(!1)},et=async()=>{console.log("getTokenURI")},en=async()=>{console.log("getStartingTime");let e=new a.CH(o.L,o.M,n),t=await e.getStartingTimeOfAuction(x,A);return console.log("startingTimeOfAuction",t),t},ei=async()=>{console.log("getWinnerOfAuction");let e=new a.CH(o.L,o.M,n),t=await e.getCurrentWinner(x,A);return console.log("currentWinner",t),t},ea=async()=>{console.log("getTemporaryHighestBid");let e=new a.CH(o.L,o.M,n),t=await e.getTemporaryHighestBid(x,A);return console.log("currentWinner",t),t},es=async()=>{console.log("getAuctionInterval");let e=new a.CH(o.L,o.M,n),t=await e.getIntervalOfNftAuction(x,A);return console.log("intervalOfNftAuction",t),t},er=async()=>{console.log("getSellerOfTheNft");let e=new a.CH(o.L,o.M,n),t=await e.getSellerOfTheNft(x,A);return console.log("sellerOfTheNft",t),t};async function ed(){console.log("MakeBid",D);let e=s.parseUnits(D,"ether").toString();console.log("msgVal",e);let t=new a.CH(o.L,o.M,null==n?void 0:n.getSigner());el(await t.makeBid(x,A,{value:e}))}async function el(e){await e.wait(1),console.log("Bid Initialized. Please wait for about 30 seconds to see your bid in Bids Section  of this nft"),p("Bid has been placed","success"),ee()}async function eo(){console.log("Withdrawing Winning Bid");let e=new a.CH(o.L,o.M,null==n?void 0:n.getSigner());eu(await e.withdrawWinningBid(x,A))}async function eu(e){await e.wait(1),console.log("You have received the winning bid in your wallet"),p("Your have received the winning bid in your wallet","success")}async function ec(){console.log("Withdrawing Nft after unsuccesful Auction"),console.log("Claiming Nft after Winning Auction");let e=new a.CH(o.L,o.M,null==n?void 0:n.getSigner());ep(await e.withdrawNft(x,A))}async function ep(e){await e.wait(1),console.log("You have received the nft in your wallet as the auction ended without no bids"),p("You have received the nft","success")}async function ey(){console.log("Claiming Nft after Winning Auction");let e=new a.CH(o.L,o.M,null==n?void 0:n.getSigner());em(await e.receiveNft(x,A))}async function em(e){await e.wait(1),console.log("You have received the nft in your wallet as the as your made the highest winning bid"),p("You have reeeived the nft","success")}return(0,r.useEffect)(()=>{n&&u&&(null==u?void 0:u.length)>0&&(X(u[0]),console.log("sdsd"))},[u,n]),(0,r.useEffect)(()=>{V&&ee()},[V]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y(),{children:(0,i.jsx)("title",{children:"Chicken Detail"})}),(0,i.jsx)(c.Z,{children:(0,i.jsx)(m.Z,{maxWidth:"md",children:(0,i.jsxs)("div",{className:"container mx-auto",children:[(0,i.jsx)("h1",{className:"py-12 px-4 font-bold text-2xl  ml-auto",children:"The details of the Nft"}),(0,i.jsx)("div",{className:"flex flex-wrap",children:n?F||!Q?(0,i.jsx)("div",{children:"Loading..."}):(0,i.jsxs)("div",{style:{minHeight:"80vh"},children:[(0,i.jsxs)("div",{className:"flex ml-20 mt-20",children:[(0,i.jsx)("img",{src:b,alt:"",className:"w-2/5"}),(0,i.jsxs)("div",{className:"text-xl text-white ml-20 space-y-8 text-black shadow-2xl rounded-lg border-2 p-5 bg-[#16de66]",children:[H?(0,i.jsx)("span",{children:"Auction has ended"}):(0,i.jsxs)("span",{children:["Time left: ",G]}),(0,i.jsxs)("div",{children:["Current Price:"," ",(0,i.jsx)("span",{className:"",children:s.formatUnits(null===(e=null==Q?void 0:Q.auctions[0])||void 0===e?void 0:e.currentPrice,"ether")})]}),(0,i.jsxs)("div",{children:["Nft Owner:"," ",(0,i.jsx)("span",{className:"text-sm",children:null===(t=null==Q?void 0:Q.auctions[0])||void 0===t?void 0:t.nftSeller})]}),(0,i.jsxs)("div",{children:["Current Winner:"," ",(0,i.jsx)("span",{className:"text-sm",children:q})]}),(0,i.jsxs)("div",{children:["Auction Ended:"," ",(0,i.jsx)("span",{className:"text-sm",children:H?"True":"False"})]})]}),(0,i.jsx)("div",{children:(0,i.jsx)("div",{children:H?(0,i.jsx)("div",{children:"This Auction has Ended"}):(0,i.jsxs)(f.Z,{component:"form",onSubmit:ed,noValidate:!0,autoComplete:"off",sx:{"& .MuiTextField-root":{m:1,width:"25ch"}},children:[(0,i.jsx)(g.Z,{variant:"h6",gutterBottom:!0,children:"Make A Bid"}),(0,i.jsx)(h.Z,{label:"Bid Price In Eth",type:"number",value:D,onChange:e=>R(e.target.value),fullWidth:!0}),(0,i.jsx)(T.Z,{type:"submit",variant:"contained",color:"secondary",children:"Submit Bid"})]})})})]}),(0,i.jsxs)("div",{className:"flex",children:[F?(0,i.jsx)("div",{children:"loading bits..."}):null==M?void 0:M.map(e=>{let{bidder:t,bidAmount:n}=e;return(0,i.jsxs)("ul",{children:[(0,i.jsxs)("li",{children:["bidder: ",t]}),(0,i.jsxs)("li",{children:["bidAmount: ",n]})]})}),H?L?(0,i.jsxs)("div",{className:"ml-auto ",children:[(0,i.jsx)("div",{className:"mt-6",children:(0,i.jsx)(T.Z,{size:"large",color:"primary",variant:"contained",onClick:eo,children:"Withdraw Winning Bid"})}),(0,i.jsx)("div",{children:(0,i.jsx)(T.Z,{size:"large",variant:"contained",color:"primary",onClick:ec,children:"Withdraw Nft"})})]}):Y?(0,i.jsx)("div",{className:"ml-auto mt-6 ",children:(0,i.jsx)(T.Z,{size:"large",variant:"contained",color:"primary",onClick:ey,children:"Claim Your Nft"})}):(0,i.jsx)("div",{children:" was? "}):(0,i.jsx)("div",{children:" was 2?"})]}),(0,i.jsxs)("p",{children:["isAuctionWinner: ",Y?"true":"false"]})]}):(0,i.jsx)("div",{children:"Web3 Currently Not Enabled"})})]})})})]})}},8617:function(e){"use strict";e.exports=JSON.parse('{"M":[{"inputs":[],"name":"Auction__AuctionDontHaveBids","type":"error"},{"inputs":[],"name":"Auction__AuctionHasEnded","type":"error"},{"inputs":[],"name":"Auction__AuctionHaveBids","type":"error"},{"inputs":[],"name":"Auction__AuctionNotEndedYet","type":"error"},{"inputs":[],"name":"Auction__NotAuctionNftSeller","type":"error"},{"inputs":[],"name":"Auction__NotAuctionWinner","type":"error"},{"inputs":[],"name":"Auction__NotNftOwner","type":"error"},{"inputs":[],"name":"Auction__SendMoreToMakeBid","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"nftAdress","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":true,"internalType":"address","name":"nftSellerAdress","type":"address"},{"indexed":false,"internalType":"uint256","name":"minprice","type":"uint256"},{"indexed":false,"internalType":"uint32","name":"interval","type":"uint32"}],"name":"AuctionInitialized","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"nftAdress","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":true,"internalType":"address","name":"bidMakerAddress","type":"address"},{"indexed":false,"internalType":"uint256","name":"price","type":"uint256"}],"name":"BidMade","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"nftAdress","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":true,"internalType":"address","name":"nftsellerAddress","type":"address"},{"indexed":false,"internalType":"uint256","name":"winningBid","type":"uint256"}],"name":"ReceiveWinningBidAfterAuction","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"nftAdress","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":true,"internalType":"address","name":"nftWinnerAddress","type":"address"},{"indexed":false,"internalType":"uint256","name":"finalPrice","type":"uint256"}],"name":"WinNftAfterAuction","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"nftAdress","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":true,"internalType":"address","name":"nftsellerAddress","type":"address"}],"name":"WithdrawNftAfterAuctionUnsuccesful","type":"event"},{"inputs":[{"internalType":"address","name":"_nftContractAddress","type":"address"},{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"uint256","name":"_minPrice","type":"uint256"},{"internalType":"uint32","name":"interval","type":"uint32"}],"name":"InitializeAuction","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"activeAuctions","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getActiveAuctions","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_nftContractAddress","type":"address"},{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"address","name":"sender","type":"address"}],"name":"getAmountFundedByAnAddress","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_nftContractAddress","type":"address"},{"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"getBeginningPriceOfTheNft","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_nftContractAddress","type":"address"},{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"address","name":"sender","type":"address"}],"name":"getBidOfAnAddress","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_nftContractAddress","type":"address"},{"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"getCurrentWinner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_nftContractAddress","type":"address"},{"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"getIntervalOfNftAuction","outputs":[{"internalType":"uint32","name":"","type":"uint32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_nftContractAddress","type":"address"},{"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"getSellerOfTheNft","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_nftContractAddress","type":"address"},{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"uint256","name":"index","type":"uint256"}],"name":"getSpecificAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_nftContractAddress","type":"address"},{"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"getStartingTimeOfAuction","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_nftContractAddress","type":"address"},{"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"getStateOfAuction","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_nftContractAddress","type":"address"},{"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"getTemporaryHighestBid","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_nftContractAddress","type":"address"},{"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"makeBid","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"nftContractAuctions","outputs":[{"internalType":"uint32","name":"i_interval","type":"uint32"},{"internalType":"uint256","name":"minPrice","type":"uint256"},{"internalType":"uint256","name":"s_lastTimeStamp","type":"uint256"},{"internalType":"uint256","name":"temporaryHighestBid","type":"uint256"},{"internalType":"address payable","name":"currentWinner","type":"address"},{"internalType":"address","name":"nftSeller","type":"address"},{"internalType":"bool","name":"auctionStarted","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_nftContractAddress","type":"address"},{"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"receiveNft","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_nftContractAddress","type":"address"},{"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"withdrawNft","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_nftContractAddress","type":"address"},{"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"withdrawWinningBid","outputs":[],"stateMutability":"nonpayable","type":"function"}],"L":"0xDc64a140Aa3E981100a9becA4E685f962f0cF6C9"}')}},function(e){e.O(0,[881,139,146,452,241,774,888,179],function(){return e(e.s=4863)}),_N_E=e.O()}]);