(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7973],{7156:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/battle",function(){return n(9778)}])},9778:function(e,t,n){"use strict";n.r(t);var i=n(5893),s=n(7294),l=n(7357),a=n(5861),r=n(9417),c=n(5568),o=n(4687),u=n(1438),d=n(6076),h=n(5553),f=n(5800),g=n(1378),x=n(9267);let w=e=>{let{chicken:t,onFight:n,isLoading:s}=e;return(0,i.jsxs)(l.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",m:2,p:2,boxShadow:3},children:[(0,i.jsx)(a.Z,{style:{fontSize:50},children:"\uD83D\uDC14"}),(0,i.jsxs)(a.Z,{children:["Chicken #",t.tokenId]}),t.isDead?(0,i.jsx)(a.Z,{children:"\uD83D\uDC80 Resting in peace"}):(0,i.jsx)(a.Z,{children:"\uD83D\uDC14 Ready for battle"}),(0,i.jsx)(r.Z,{variant:"contained",onClick:n,disabled:t.isDead||s,children:s?"Battling...":"Fight!"})]})},D=()=>{let{active:e,account:t,library:n}=(0,o.Ge)(),[r,D]=(0,s.useState)(""),[k,j]=(0,s.useState)(""),[p,C]=(0,s.useState)([]),[y,Z]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let i=async()=>{if(e&&t){let e=await f.Z.loadNfts(n,g.L,t),i=new u.Qg(n.provider),s=new d.CH(g.L,g.M,i),l=[];for(let t=0;t<e.length;t++){let n=await s.getChickenDetails(e[t].tokenId);console.log("details",n),l.push({...e[t],...n})}console.log(l),C(l)}};i()},[e,t]);let _=async e=>{Z(!0);try{let t=new u.Qg(n.provider),i=new d.CH(g.L,g.M,t.getSigner()),s=await i.fight(e,{gasLimit:3e7,value:h.fi("10")}),l=await s.wait();console.log("res",l),D("\uD83C\uDF89 Chicken #{chickenId} just battled!")}catch(e){D(function(e){let t="reverted with reason string '";if(e.includes(t)){let n=e.indexOf(t)+t.length,i=e.indexOf("'",n);return e.substring(n,i)}return"null"}(e.message))}finally{Z(!1)}};return(0,i.jsxs)(x.Z,{children:[(0,i.jsx)(a.Z,{variant:"h1",children:"Chicken Fight Club"}),(0,i.jsxs)(l.Z,{sx:{display:"flex",flexWrap:"wrap",gap:2,mt:2,mb:4,alignItems:"center",justifyContent:t&&p&&p.length>0?"flex-start":"center"},children:[r&&(0,i.jsx)(c.Z,{severity:"info",children:r}),k&&(0,i.jsx)(c.Z,{severity:"success",children:k}),t&&p&&p.length>0?p.map(e=>(0,i.jsx)(w,{chicken:e,onFight:()=>_(e.tokenId),isLoading:y},e.tokenId)):(0,i.jsx)(a.Z,{variant:"h6",color:"textSecondary",children:"\uD83E\uDD7A You have no chickens ready for the battle."})]})]})};t.default=D}},function(e){e.O(0,[5861,7739,1262,7940,7910,755,2609,1486,6231,4646,9774,2888,179],function(){return e(e.s=7156)}),_N_E=e.O()}]);